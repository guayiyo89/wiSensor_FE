<div class="row">
    <h2>Editar Radar</h2>
    <div class="col-md-6">
        <form [formGroup]="editForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
                <label>Nombre</label>
                <input type="text" formControlName="nombre" placeholder="Nombre" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.nombre.errors }">
                <div *ngIf="submitted && f.nombre.errors">
                    <div *ngIf="f.nombre.errors.required" style="font-size: 9px; color: rgb(187, 18, 18)">El nombre es obligatorio.</div>
                </div>
            </div>
            
            <div class="form-group">
                <label>Descripción</label>
                <input type="text" formControlName="descripcion" placeholder="Descripción" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.descripcion.errors }">
                <div *ngIf="submitted && f.descripcion.errors">
                    <div *ngIf="f.descripcion.errors.required" style="font-size: 9px; color: rgb(187, 18, 18)">La descripción es obligatoria.</div>
                </div>
            </div>

            <div class="form-group">
                <label>Empresa</label>
                <select formControlName="empresa_id" class="form-control" (change)="changeCentros($event)">
                    <option *ngFor="let empresa of empresaList" value="{{empresa.id}}">{{empresa.nombre}}</option>
                </select>
                <div *ngIf="submitted && f.empresa_id.errors">
                    <div *ngIf="f.empresa_id.errors.required" style="font-size: 9px; color: rgb(187, 18, 18)">Es necesario asignar una empresa.</div>
                </div>
            </div>

            <div class="form-group">
                <label>Centro</label>
                <select formControlName="id_centro" class="form-control">
                    <option *ngFor="let centro of centroList" value="{{centro.id}}">{{centro.nombre}}</option>
                </select>
                <div *ngIf="submitted && f.id_centro.errors">
                    <div *ngIf="f.id_centro.errors.required" style="font-size: 9px; color: rgb(187, 18, 18)">Es necesario asignar un centro.</div>
                </div>
            </div>
    
    
            <div class="form-group">
                <label>Modelo</label>
                <input type="text" formControlName="modelo" placeholder="Modelo" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.modelo.errors }">
                <div *ngIf="submitted && f.modelo.errors">
                    <div *ngIf="f.modelo.errors.required" style="font-size: 9px; color: rgb(187, 18, 18)">El modelo es obligatorio.</div>
                </div>
            </div>
    
            <div class="form-group">
                <label>Marca</label>
                <input type="text" formControlName="marca" placeholder="Marca" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.marca.errors }">
                <div *ngIf="submitted && f.marca.errors">
                    <div *ngIf="f.marca.errors.required" style="font-size: 9px; color: rgb(187, 18, 18)">El modelo es obligatorio.</div>
                </div>
            </div>
    
            <div class="form-group">
                <label>Estado</label>
                <select formControlName="status" class="form-control">
                    <option value="1" selected>Activo</option>
                    <option value="0">Inactivo</option>
                </select>
                <div *ngIf="submitted && f.status.errors">
                    <div *ngIf="f.status.errors.required" style="font-size: 9px; color: rgb(187, 18, 18)">Es necesario asignar un estado.</div>
                </div>
            </div>
    
            <div class="form-group">
                <label>Código</label>
                <input type="text" formControlName="codigo" placeholder="Código" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.codigo.errors }">
                <div *ngIf="submitted && f.codigo.errors">
                    <div *ngIf="f.codigo.errors.required" style="font-size: 9px; color: rgb(187, 18, 18)">El modelo es obligatorio.</div>
                </div>
            </div>

            <div class="form-group">
                <label>Video URL</label>
                <input type="text" formControlName="url_video" placeholder="Código" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.url_video.errors }">
                <div *ngIf="submitted && f.url_video.errors">
                    <div *ngIf="f.url_video.errors.required" style="font-size: 9px; color: rgb(187, 18, 18)">Asigne una URL de Video</div>
                </div>
            </div>

            <div class="form-group">
                <label>Latitud</label>
                <input type="number" formControlName="latitud" placeholder="Latitud" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.latitud.errors }">
                <div *ngIf="submitted && f.latitud.errors">
                    <div *ngIf="f.latitud.errors.required" style="font-size: 9px; color: rgb(187, 18, 18)">La latitud es obligatoria.</div>
                </div>
            </div>
            <div class="form-group">
                <label>Longitud</label>
                <input type="number" formControlName="longitud" placeholder="Longitud" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.longitud.errors }">
                <div *ngIf="submitted && f.longitud.errors">
                    <div *ngIf="f.longitud.errors.required" style="font-size: 9px; color: rgb(187, 18, 18)">La longitud es obligatoria.</div>
                </div>
            </div>
    
            <!-- <div class="form-group">
                <label>Comuna</label>
                <input type="text" formControlName="comuna" placeholder="Comuna" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.comuna.errors }">
                <div *ngIf="submitted && f.comuna.errors">
                    <div *ngIf="f.comuna.errors.required" style="font-size: 9px; color: rgb(187, 18, 18)">La comuna es obligatoria.</div>
                </div>
            </div> -->

            <div style="padding-top: 1em;">
                <button (click)="volver()" type="button" class="noselect"> <fa-icon [icon]="faBack"></fa-icon> Volver</button>
                <button type="submit" class="noselect"> <fa-icon [icon]="faSave"></fa-icon> Guardar</button>
            </div>
    
        </form>
    </div>

    <div class="col-md-6">
        <google-map
        height="450px"
        width="100%"
        [zoom]="zoom"
        [center]="center"
        [options]="options"
        (mapClick)="click($event)">
            <map-marker
            #markerElem
            *ngFor="let marker of markers"
            [position]="marker.position"
            [label]="marker.label"
            [title]="marker.title"
            [options]="marker.options"
            >
            </map-marker>
        </google-map>
        <span style="color: grey; font-size: 9pt; font-family: Roboto;">Haga click en el mapa para obtener una ubicación referencial. <br>
            Se recomienda editar en los campos especificos para obtener la locación específica. </span>
    </div>

    
</div>

<h2>Zonas</h2>

<div *ngIf="zonas.length > 0">
    <div class="row" *ngFor="let zona of zonas">
        <div class="col-6">{{zona.nombre}} | <span style="padding: 3px; font-size: 9pt; background-color: darkcyan;">{{zona.cod_zona}}</span></div>
        <div class="col-6 text-right">
            <a class="btn btn-danger" (click)="delete(zona, zona.id)" style="margin: 0.5em;"> <fa-icon [icon]="faTimes"></fa-icon> </a>
            <a class="btn btn-success" (click)="openEdit(editGen)"><fa-icon [icon]="faEdit"></fa-icon></a>
        </div>

        <ng-template #editGen let-modal>
            <div class="modal-header bg-dark"><button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
              <span aria-hidden="true">&times;</span></button> <h3 class="titClima">Agregar Zona</h3> </div>
              <div class="modal-body bg-dark"><app-edit-zona [zona]="zona" (myEvent)="closeModal()"></app-edit-zona> </div>
        </ng-template>
        
    </div>
</div>

<p *ngIf="zonas.length == 0" style="font-size: 1.5em;">Asigne una zona al Radar.</p>

<div style="padding-top: 1em;">
    <button (click)="openNew(addGen)" class="noselect"> <fa-icon [icon]="faPlus"></fa-icon> Agregar</button>
</div>

<ng-template #addGen let-modal>
    <div class="modal-header bg-dark"><button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span></button> <h3 class="titClima">Agregar Zona</h3> </div>
      <div class="modal-body bg-dark"><add-zona [id_rdr]="_id" (myEvent)="closeModal()"></add-zona> </div>
</ng-template>
