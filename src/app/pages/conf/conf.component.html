<div class="container blackness">
  <ng-template pTemplate="caption">
    <h1>Configuración</h1>
  </ng-template>
  <h1>Configuración</h1>

  <p-table [value]="ListIncidentes" [paginator]="true" [rows]="10" [totalRecords]="totalRecords"
           [globalFilterFields]="['nombreCentro, CATEGORIA']" styleClass="p-datatable-sm" sortMode="multiple" [rowsPerPageOptions]="[10,15,20]" [showCurrentPageReport]="true">

    <ng-template pTemplate="header">
      <tr>
        <th style="max-width: 120px;" pSortableColumn="centro_nombre"> Nombre centro <p-sortIcon field="centro_nombre" style="color: thistle;"></p-sortIcon> </th>
        <th pSortableColumn="incidentes_codigo"> Incidentes cód. <p-sortIcon field="incidentes_codigo"></p-sortIcon> </th>
        <th style="max-width: 120px;" pSortableColumn="incidentes_tipo"> Incidentes tipo <p-sortIcon field="incidentes_valor"></p-sortIcon> </th>
        <th style="max-width: 120px;" pSortableColumn="incidentes_descripcion"> Descripcion <p-sortIcon field="incidentes_descripcion"></p-sortIcon> </th>
        <th style="max-width: 120px;" pSortableColumn="incidentes_severidad"> Severidad <p-sortIcon field="incidentes_severidad"></p-sortIcon> </th>


      </tr>
      <tr>
        <th style="max-width: 120px;"><p-columnFilter type="text" field="centro_nombre"></p-columnFilter></th>
        <th style="max-width: 120px;"><p-columnFilter type="text" field="incidentes_codigo"></p-columnFilter></th>
        <th style="max-width: 120px;"><p-columnFilter type="text" field="incidentes_tipo"></p-columnFilter></th>
        <th style="max-width: 120px;"><p-columnFilter type="text" field="incidentes_descripcion"></p-columnFilter></th>
        <th style="max-width: 120px;"><p-columnFilter type="text" field="incidentes_severidad"></p-columnFilter></th>
        <th></th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-incidente>
      <tr class="rowth blackness">
        <td>{{incidente.centro_nombre}}</td>
        <td>{{incidente.incidentes_codigo}}</td>
        <td>{{incidente.incidentes_tipo}}</td>
        <td>{{incidente.incidentes_descripcion}}</td>
        <td>{{incidente.incidentes_severidad == "warning" ? "Advertencia" : "Peligro"}}</td>
        <a href="" class="btn btn-success" [routerLink]="['/editIncidente', incidente.incidente_id]"><fa-icon [icon]="faEdit"></fa-icon></a>


      </tr>
    </ng-template>

  </p-table>

  <div class="text-right" style="margin-top: 1em;">
    <button [routerLink]="['/welcome']" class="noselect" style="margin-right: 0.5em;" type="button">
      <fa-icon [icon]="faBack"></fa-icon>
      Volver
    </button>
    <button [routerLink]="['/addIncidente']" class="noselect" type="button">
      <fa-icon [icon]="faPlus"></fa-icon> Agregar</button>

  </div>

</div>

<div class="container blackness">
  <h3>Incidentes de Seguridad</h3>

  <p-table [value]="RdrIncidentes" [paginator]="true" [rows]="10" [totalRecords]="totalRecords"
           [globalFilterFields]="['nombre, codigo']" styleClass="p-datatable-sm" sortMode="multiple" [rowsPerPageOptions]="[10,15,20]" [showCurrentPageReport]="true">

    <ng-template pTemplate="header">
      <tr>
        <th style="max-width: 120px;" pSortableColumn="nombre"> Radar <p-sortIcon field="centro_nombre" style="color: thistle;"></p-sortIcon> </th>
        <th pSortableColumn="codigo"> Código <p-sortIcon field="incidentes_codigo"></p-sortIcon> </th>
        <th style="max-width: 120px;" pSortableColumn="hora_inicio"> Intervalo <p-sortIcon field="incidentes_valor"></p-sortIcon> </th>
        <th style="max-width: 120px;" pSortableColumn="descripcion"> Descripción <p-sortIcon field="incidentes_descripcion"></p-sortIcon> </th>
        <th></th>

      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-incidente>
      <tr class="rowth blackness">
        <td *ngIf="perfil_user < 3">{{incidente.nombre}}</td>
        <td *ngIf="incidente.severidad == 'warning'"><span style="font-size: 9pt; text-transform: uppercase; background-color: rgb(228, 150, 6); border-radius: 4px; padding: 3px">{{incidente.codigo}}</span></td>
        <td *ngIf="incidente.severidad == 'error'"><span style="font-size: 9pt; text-transform: uppercase; background-color: rgb(192, 35, 7); border-radius: 4px; padding: 3px">{{incidente.codigo}}</span></td>
        <td>{{incidente.hora_inicio}} / {{incidente.hora_final}} </td>
        <td>{{incidente.descripcion}}</td>

        <td>
          <a class="btn btn-success" [routerLink]="['/editRdrIncidente', incidente.id]" ><fa-icon [icon]="faEdit"></fa-icon></a>
          <a class="btn btn-danger" (click)="delete(incidente, incidente.id)" ><fa-icon [icon]="faTimes"></fa-icon></a>
        </td>


      </tr>
    </ng-template>

  </p-table>

  <button [routerLink]="['/addRdrIncidente']" class="noselect" type="button">
    <fa-icon [icon]="faPlus"></fa-icon> Agregar</button>
</div>
